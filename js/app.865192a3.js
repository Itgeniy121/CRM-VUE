(function(){"use strict";var t={6772:function(t,e,o){o.d(e,{I:function(){return $t},db:function(){return Ct}});var r=o(9242),n=o(3396);const a={class:"app"};function i(t,e,o,r,i,s){const c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",a,[((0,n.wg)(),(0,n.j4)((0,n.LL)(s.layout),null,{default:(0,n.w5)((()=>[(0,n.Wm)(c)])),_:1}))])}const s={class:"grey darken-1 empty-layout"};function c(t,e,o,r,a,i){const c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(c)])}var l=o(6270),u={computed:{error(){return this.$store.getters.error}},watch:{error(t){console.log(t),this.$error(l.Z[t.code]||"Что-то пошло не так")}}},d=o(89);const p=(0,d.Z)(u,[["render",c]]);var m=p,h=o(4870),f=o(6007),g=o(7139);const v={class:"app-main-layout"},y={class:"app-page"},w={class:"fixed-action-btn tooltipped","data-position":"left"},b=(0,n._)("i",{class:"large material-icons"},"add",-1);function k(t,e,o,r,a,i){const s=(0,n.up)("NavBar"),c=(0,n.up)("SideBar"),l=(0,n.up)("router-view"),u=(0,n.up)("router-link"),d=(0,n.Q2)("tooltip");return(0,n.wg)(),(0,n.iD)("div",v,[(0,n.Wm)(s,{onClose:i.closeUP},null,8,["onClose"]),(0,n.Wm)(c),(0,n._)("main",{class:(0,g.C_)(["app-content",{full:!this.$store.state.isOpen}])},[(0,n._)("div",y,[(0,n.Wm)(l)])],2),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",w,[(0,n.Wm)(u,{to:"/record",class:"btn-floating btn-large blue"},{default:(0,n.w5)((()=>[b])),_:1})])),[[d,"Создать запись"]])])}const _={class:"navbar orange lighten-1"},U={class:"nav-wrapper"},E={class:"navbar-left"},$=(0,n._)("i",{class:"material-icons black-text"},"dehaze",-1),C=[$],O={class:"black-text"},x={class:"right hide-on-small-and-down"},P={class:"dropdown-trigger black-text",href:"#","data-target":"dropdown",ref:"dropdown"},j=(0,n._)("i",{class:"material-icons right"},"arrow_drop_down",-1),I={id:"dropdown",class:"dropdown-content"},D=(0,n._)("i",{class:"material-icons"},"account_circle",-1),H=(0,n._)("li",{class:"divider",tabindex:"-1"},null,-1),S=(0,n._)("i",{class:"material-icons"},"assignment_return",-1);function Z(t,e,o,a,i,s){const c=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("nav",_,[(0,n._)("div",U,[(0,n._)("div",E,[(0,n._)("a",{href:"#",onClick:e[0]||(e[0]=(0,r.iM)(((...t)=>s.closeUp&&s.closeUp(...t)),["prevent"]))},C),(0,n._)("span",O,(0,g.zw)(t.date),1)]),(0,n._)("ul",x,[(0,n._)("li",null,[(0,n._)("a",P,[(0,n.Uk)((0,g.zw)(s.name)+" ",1),j],512),(0,n._)("ul",I,[(0,n._)("li",null,[(0,n.Wm)(c,{to:"/profile",class:"black-text"},{default:(0,n.w5)((()=>[D,(0,n.Uk)("Профиль ")])),_:1})]),H,(0,n._)("li",null,[(0,n._)("a",{href:"#",class:"black-text",onClick:e[1]||(e[1]=(0,r.iM)(((...t)=>s.logout&&s.logout(...t)),["prevent"]))},[S,(0,n.Uk)("Выйти ")])])])])])])])}o(7658);var B={data:()=>({date:null,interval:null,dropdown:null}),methods:{closeUp(){this.$emit("close")},async logout(){await this.$store.dispatch("logout"),this.$router.push("/login?message=exit")}},mounted(){this.interval=setInterval((()=>{let t=new Date;this.date=t.toLocaleString()}),1e3),this.dropdown=M.Dropdown.init(this.$refs.dropdown,{constrainWidth:!0})},created(){this.interval=setInterval((()=>{let t=new Date;this.date=t.toLocaleString()}),1e3),this.dropdown=M.Dropdown.init(this.$refs.dropdown,{constrainWidth:!0})},beforeDestroy(){clearInterval(this.interval),this.dropdown&&this.dropdown.destroy()&&this.dropdown.destroy()},computed:{name(){return this.$store.getters.info.name}}};const L=(0,d.Z)(B,[["render",Z]]);var T=L;const A=["id"],W={href:"#",class:"animation2"};function F(t,e,o,r,a,i){const s=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("ul",{class:(0,g.C_)(["sidenav app-sidenav",{open:this.$store.state.isOpen}])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.links,(t=>((0,n.wg)(),(0,n.iD)("li",{key:t.url,class:"animation",id:t.id},[(0,n.Wm)(s,{to:t.url,exact:t.exact},{default:(0,n.w5)((()=>[(0,n._)("a",W,(0,g.zw)(t.title),1)])),_:2},1032,["to","exact"])],8,A)))),128))],2)}var N={data:()=>({links:[{title:"Счёт",url:"/",exact:!0,id:"anim1"},{title:"История",url:"/history"},{title:"Планирование",url:"/planning"},{title:"Новая запись",url:"/record"},{title:"Категории",url:"/categories"}]})};const R=(0,d.Z)(N,[["render",F]]);var V=R,z={name:"main-layout",components:{SideBar:V,NavBar:T},async mounted(){try{this.$store.getters.info&&(await this.$store.dispatch("fetchInfo"),console.log(this.$store.getters.info))}catch(t){console.log(t)}},methods:{closeUP(){this.$store.commit("closeUP")}},computed:{error(){return this.$store.getters.error}},watch:{error(t){console.log(t),this.$error(l.Z[t.code]||"Что-то пошло не так")}}};const K=(0,d.Z)(z,[["render",k]]);var q=K,G={setup(){const t=(0,h.qj)({title:"Main",description:"aboba"});(0,f.u)({title:(0,n.Fl)((()=>t.title)),meta:[{name:"description",content:(0,n.Fl)((()=>t.description))}]})},computed:{layout(){return(this.$route.meta.layout||"empty")+"-layout"}},components:{EmptyLayout:m,MainLayout:q}};const J=(0,d.Z)(G,[["render",i]]);var Q=J,Y=o(4501),X=o(5431);(0,X.z)("/CRM-VUE/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var tt=o(1120),et=o(65),ot=o(3854),rt=o(7130),nt={actions:{async login({dispatch:t,commit:e},{email:o,password:r}){try{await(0,ot.e5)($t,o,r)}catch(n){throw e("setError",n),console.log("ошибка в логине"),n}},async register({dispatch:t,commit:e},{email:o,password:r,name:n}){try{await(0,ot.Xb)($t,o,r);const e=await t("getUid"),a=(0,rt.iH)(Ct,`users/${e}/info`);(0,rt.t8)(a,{bill:0,name:n,email:o,password:r})}catch(a){throw e("setError",a),console.log("ошибка в реге"),a}},getUid(){const t=$t.currentUser;return t?t.uid:null},async logout({commit:t}){await(0,ot.w7)($t),t("clearInfo")}}},at={state:{info:{}},getters:{info:t=>t.info},mutations:{setInfo(t,e){t.info=e},clearInfo(t){t.info={}}},actions:{async fetchInfo({dispatch:t,commit:e}){try{const o=await t("getUid"),r=(0,rt.iH)(Ct,`users/${o}/info`),n=(await(0,rt.U2)(r)).val();return e("setInfo",n),n}catch(o){console.log(o),console.log("ошибка в получение инфы")}},async updateBill({dispatch:t,commit:e,getters:o},r){try{const n=await t("getUid"),a={...o.info,...r},i=(0,rt.iH)(Ct,`users/${n}/info/`);(0,rt.t8)(i,a),e("setInfo",a)}catch(n){throw e("setError",n),n}}}},it={actions:{async createCategory({commit:t,dispatch:e},{name:o,limit:r}){try{const t=await e("getUid"),n=(0,rt.iH)(Ct,`users/${t}/categories/`),a=(0,rt.VF)(n,{name:o,limit:r});return{name:o,limit:r,id:a.key}}catch(n){throw t("setError",n),n}},async fetchCategories({commit:t,dispatch:e}){try{const t=await e("getUid"),o=(0,rt.iH)(Ct,`users/${t}/categories/`);let r=(await(0,rt.U2)(o)).val()||{};return Object.keys(r).map((t=>({...r[t],id:t})))}catch(o){throw t("setError",o),o}},async updateCategory({dispatch:t},{id:e,name:o,limit:r}){try{const n=await t("getUid"),a=(0,rt.iH)(Ct,`users/${n}/categories/${e}`);(0,rt.t8)(a,{name:o,limit:r,id:e})}catch(n){console.log(n)}},async fetchCategory({commit:t,dispatch:e},o){try{const t=await e("getUid");let r=(0,rt.iH)(Ct,`users/${t}/categories/`);r=(0,rt.iU)(r,o);let n=(await(0,rt.U2)(r)).val()||{};return{...n,id:o}}catch(r){throw t("setError",r),r}}}},st={actions:{async createRecord({dispatch:t,commit:e},o){try{const e=await t("getUid"),r=await(0,rt.iH)(Ct,`users/${e}/records/`);return(0,rt.VF)(r,o)}catch(r){throw e("setError",r),r}},async fetchRecords({dispatch:t,commit:e}){try{const e=await t("getUid"),o=(0,rt.iH)(Ct,`users/${e}/records/`);let r=(await(0,rt.U2)(o)).val()||{};return Object.keys(r).map((t=>({...r[t],id:t})))}catch(o){throw e("setError",o),o}},async fetchRecordById({dispatch:t,commit:e},o){try{const e=await t("getUid");let r=(0,rt.iH)(Ct,`users/${e}/records/`);r=(0,rt.iU)(r,o);let n=(await(0,rt.U2)(r)).val()||{};return{...n,id:o}}catch(r){throw e("setError",r),r}}}};const ct=(0,et.MT)({state(){return{isOpen:!0,error:null}},mutations:{closeUP(t){t.isOpen=!t.isOpen},setError(t,e){t.error=e},clearError(t){t.error=0}},modules:{auth:nt,info:at,category:it,recoed:st},getters:{error:t=>t.error},actions:{async fetchCurrency(){const t=new Headers;t.append("apikey","L9xwnELhm64A1HVHeZlVcBTLmY1JrPsn");var e={method:"GET",redirect:"follow",headers:t};const o=await fetch("https://api.apilayer.com/exchangerates_data/latest?symbols=RUB,EUR,USD",e);return await o.json()}}});var lt=ct,ut=o(7795),dt=o(5797),pt=o.n(dt),mt={install:t=>{t.config.globalProperties.$message=function(t){pt().toast({html:t})},t.config.globalProperties.$error=function(t){pt().toast({html:t})}}};const ht={class:"app-loader"},ft=(0,n.uE)('<div class="preloader-wrapper big active"><div class="spinner-layer spinner-blue-only"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div>',1),gt=[ft];function vt(t,e,o,r,a,i){return(0,n.wg)(),(0,n.iD)("div",ht,gt)}var yt={};const wt=(0,d.Z)(yt,[["render",vt]]);var bt=wt,kt={beforeMount(t,e){M.Tooltip.init(t,{html:e.value})},unmounted(t){const e=M.Tooltip.getInstance(t);e&&e.destroy&&e.destroy()}},_t=o(2350);const Ut=(0,ut.ZF)({apiKey:"AIzaSyC_v_4lK8mlAKF7-1D4vPvQdJ6uKmuRWHU",authDomain:"crm-system-86eef.firebaseapp.com",projectId:"crm-system-86eef",storageBucket:"crm-system-86eef.appspot.com",messagingSenderId:"1069999521434",appId:"1:1069999521434:web:f624b7663015950dfca923",measurementId:"G-VN7C9ME45B"});let Et;const $t=(0,ot.v0)(Ut),Ct=(0,rt.N8)(Ut);$t.onAuthStateChanged((()=>{if(!Et){const t=(0,_t.G6)();Et=(0,r.ri)(Q).use(lt).use(tt.Z).use(mt).use(t).directive("tooltip",kt).component("Loader",bt).component("Paginate",Y.Z).mount("#app")}}))},1120:function(t,e,o){var r=o(2483),n=o(6772);const a=[{path:"/",name:"home",meta:{layout:"main",auth:!0},component:()=>o.e(345).then(o.bind(o,345))},{path:"/login",name:"login",meta:{layout:"empty"},component:()=>Promise.all([o.e(723),o.e(251)]).then(o.bind(o,9251))},{path:"/register",name:"register",meta:{layout:"empty"},component:()=>Promise.all([o.e(723),o.e(542)]).then(o.bind(o,2542))},{path:"/categories",name:"categories",meta:{layout:"main",auth:!0},component:()=>Promise.all([o.e(723),o.e(922)]).then(o.bind(o,2922))},{path:"/history",name:"history",meta:{layout:"main",auth:!0},component:()=>o.e(447).then(o.bind(o,4447))},{path:"/profile",name:"profile",meta:{layout:"main",auth:!0},component:()=>o.e(624).then(o.bind(o,4624))},{path:"/record",name:"record",meta:{layout:"main",auth:!0},component:()=>Promise.all([o.e(723),o.e(844)]).then(o.bind(o,844))},{path:"/planning",name:"planning",meta:{layout:"main",auth:!0},component:()=>o.e(721).then(o.bind(o,2721))},{path:"/detailrec/:id",name:"detailrec",meta:{layout:"main",auth:!0},component:()=>o.e(699).then(o.bind(o,8699))}],i=(0,r.p7)({history:(0,r.PO)("/CRM-VUE/"),routes:a});i.beforeEach(((t,e,o)=>{const r=n.I.currentUser,a=t.matched.some((t=>t.meta.auth));a&&!r?o("/login?message=login"):o()})),e["Z"]=i},6270:function(t,e){e["Z"]={"auth/user-not-found":"Пользователя с таким Email не существует",exit:"Вы вышли из системы","auth/wrong-password":"Неправильный пароль","auth/email-already-in-use":"Пользователь с таким Email уже существует",createCategory:"Вы создали категорию",login:"Для начала авторизируйтесь"}}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var a=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=t,function(){var t=[];o.O=function(e,r,n,a){if(!r){var i=1/0;for(u=0;u<t.length;u++){r=t[u][0],n=t[u][1],a=t[u][2];for(var s=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every((function(t){return o.O[t](r[c])}))?r.splice(c--,1):(s=!1,a<i&&(i=a));if(s){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[r,n,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,r){return o.f[r](t,e),e}),[]))}}(),function(){o.u=function(t){return"js/"+t+"."+{251:"9836a6d0",345:"1a492625",447:"7ec54836",542:"c772a3cb",624:"8b92ece5",699:"b4e7038a",721:"83002922",723:"99c8485e",844:"ef7c6614",922:"f6239817"}[t]+".js"}}(),function(){o.miniCssF=function(t){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="crm-system:";o.l=function(r,n,a,i){if(t[r])t[r].push(n);else{var s,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+a){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",e+a),s.src=r),t[r]=[n];var p=function(e,o){s.onerror=s.onload=null,clearTimeout(m);var n=t[r];if(delete t[r],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((function(t){return t(o)})),e)return e(o)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){o.p="/CRM-VUE/"}(),function(){var t={143:0};o.f.j=function(e,r){var n=o.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise((function(o,r){n=t[e]=[o,r]}));r.push(n[2]=a);var i=o.p+o.u(e),s=new Error,c=function(r){if(o.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,n[1](s)}};o.l(i,c,"chunk-"+e,e)}},o.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,a,i=r[0],s=r[1],c=r[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(c)var u=c(o)}for(e&&e(r);l<i.length;l++)a=i[l],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(u)},r=self["webpackChunkcrm_system"]=self["webpackChunkcrm_system"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(6772)}));r=o.O(r)})();
//# sourceMappingURL=app.865192a3.js.map