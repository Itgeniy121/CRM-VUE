"use strict";(self["webpackChunkcrm_system"]=self["webpackChunkcrm_system"]||[]).push([[345],{345:function(e,r,t){t.r(r),t.d(r,{default:function(){return E}});var s=t(3396);const n={class:"page-title"},c=(0,s._)("h3",null,"Счет",-1),a=(0,s._)("i",{class:"material-icons"},"refresh",-1),l=[a],i={key:1,class:"row"};function u(e,r,t,a,u,o){const d=(0,s.up)("Loader"),h=(0,s.up)("HomeBill"),y=(0,s.up)("HomeCurrency");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",n,[c,(0,s._)("button",{class:"btn waves-effect waves-light btn-small",onClick:r[0]||(r[0]=(...e)=>o.refresh&&o.refresh(...e))},l)]),e.loading?((0,s.wg)(),(0,s.j4)(d,{key:0})):((0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(h,{rates:e.currency.rates},null,8,["rates"]),(0,s.Wm)(y,{rates:e.currency.rates,date:e.currency.date},null,8,["rates","date"])]))])}var o=t(7139);const d={class:"col s12 m6 l4"},h={class:"card light-blue bill-card"},y={class:"card-content white-text"},_=(0,s._)("span",{class:"card-title"},"Счет в валюте",-1);function g(e,r,t,n,c,a){return(0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",h,[(0,s._)("div",y,[_,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.currencies,(e=>((0,s.wg)(),(0,s.iD)("p",{key:e,class:"currency-line"},[(0,s._)("span",null,(0,o.zw)(a.getCurrency(e)),1)])))),128))])])])}var w={props:["rates"],data:()=>({currencies:["RUB","USD","EUR"]}),computed:{base(){return this.$store.getters.info.bill/(this.rates["RUB"]/this.rates["EUR"])}},methods:{getCurrency(e){return Math.floor(this.base*this.rates[e]).toLocaleString("ru-RU",{style:"currency",currency:e})}}},m=t(89);const p=(0,m.Z)(w,[["render",g]]);var v=p;const f={class:"col s12 m6 l8"},b={class:"card orange darken-3 bill-card"},k={class:"card-content white-text"},D=(0,s._)("div",{class:"card-header"},[(0,s._)("span",{class:"card-title"},"Курс валют")],-1),C=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Валюта"),(0,s._)("th",null,"Курс"),(0,s._)("th",null,"Дата")])],-1);function U(e,r,t,n,c,a){return(0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("div",b,[(0,s._)("div",k,[D,(0,s._)("table",null,[C,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.currencies,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e},[(0,s._)("td",null,(0,o.zw)(e),1),(0,s._)("td",null,(0,o.zw)(t.rates[e].toFixed(4)),1),(0,s._)("td",null,(0,o.zw)(t.date),1)])))),128))])])])])])}var R={props:["rates","date"],data:()=>({currencies:["RUB","EUR","USD"]})};const H=(0,m.Z)(R,[["render",U]]);var B=H,z={name:"home",data:()=>({loading:!0,currency:null}),components:{HomeBill:v,HomeCurrency:B},async mounted(){this.currency=await this.$store.dispatch("fetchCurrency"),console.log(this.currency),this.loading=!1},methods:{async refresh(){this.loading=!0,this.currency=await this.$store.dispatch("fetchCurrency"),this.loading=!1}}};const x=(0,m.Z)(z,[["render",u]]);var E=x}}]);
//# sourceMappingURL=345.1a492625.js.map